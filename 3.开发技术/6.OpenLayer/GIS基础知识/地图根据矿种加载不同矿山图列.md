# 根据不同矿种加载不同矿山图列

## 一、矿山图例命名规则

图片可以分为两类，第一大类是不同的矿种所对应的不同的矿山图片，这些图片的命名从1-1开始到1-306结束，在页面上显示单个矿山数据时需要加载该矿山对应的矿种图片。第二大类是在进行聚合后，当矿山数量大于1，需要加载该种图片，命名为Cluster0.png，该图会显示所聚合的矿山数量。

## 二、矿山图例加载

前台页面设置的矢量图层Vector中需要设置一个数据源，数据源是ol.source.Cluster，该数据源需要设置distance参数即聚合的距离，当矿山之间的距离大于这个距离，在地图会分开显示，而当矿山或者聚合点之间的距离小于设定值会进行聚合，在聚合点重新设置对应的矿山数量，ol.source.Cluster同样也需要设置一个数据源，该数据源是地图上的要素集合。

配置完成矢量图层Vector的数据源后，需要设置矢量图层Vector的样式，

在Style中，先获得该矢量图层Vector的数据源的要素集合长度，若改长度为1表明只有一个矿山在地图的某个区域上，则在地图上要显示改矿山对应的矿种图片，用 styleCache每次加载图例时进行判断，若有相同的样式 直接取用，减少开销，当没有对应的样式时需要新建一个style，在ol.style.Style

设置image参数，该参数取用ol.style.Icon来进行加载矿山图例，该方法中用anchor设置图标中心，用scale设置图片大小，src来设置图例途径。

 当矢量图层Vector的数据源的要素集合长度大于1，同样用ol.style.Icon来设置聚合的图片，用text参数的ol.style.Text来设置对应的矿山数量。

